import React from "react";
import { PageButton } from "./PageButton";

type Props = {
  currentPage: number;
  totalPages: number;
  onClick: (page) => void;
};

export const Pagination: React.FC<Props> = ({ currentPage, totalPages, onClick }) => {
  const renderButtons = () => {
    let pages = [];
    let buttons = [];
    if (totalPages <= 7) {
      pages = [1, 2, 3, 4, 5, 6, 7];
    } else {
      if (currentPage <= 4) {
        pages = [1, 2, 3, 4, 5, "...", totalPages];
      } else if (currentPage >= totalPages - 4) {
        pages = [1, "...", totalPages - 4, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];
      } else {
        pages = [1, "...", currentPage - 1, currentPage, currentPage + 1, "...", totalPages];
      }
    }
    pages.map((page) => {
      buttons.push(
        page === "..." ? (
          <span className="flex items-center justify-center px-3 py-2 mx-1">...</span>
        ) : (
          <PageButton page={page} onClick={onClick} currentPage={currentPage}>
            {page}
          </PageButton>
        )
      );
    });
    return buttons;
  };

  return <div className="flex mt-2">{renderButtons()}</div>;
};
